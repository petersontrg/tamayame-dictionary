{% extends "layout.html" %}
{% block content %}

<h2 class="text-xl font-semibold mb-4">Morpheme Index</h2>

<form method="get" class="mb-4">
  <input name="q" type="text" placeholder="Search morphemes..."
         value="{{ request.args.get('q','') }}"
         class="border border-gray-300 px-3 py-2 rounded w-full">
</form>

<table class="w-full table-auto text-sm border border-collapse">
  <thead class="bg-gray-100 border-b">
    <tr>
      <th class="px-3 py-2 text-left">Morpheme</th>
      <th class="px-3 py-2 text-left">Gloss</th>
      <th class="px-3 py-2 text-left">Category</th>
      <th class="px-3 py-2 text-left">Used In</th>
    </tr>
  </thead>
  <tbody>
    {% for m in morphemes %}
    <tr class="border-b hover:bg-gray-50">
      {# Morpheme #}
      <td class="px-3 py-2 align-top font-medium text-indigo-700">
        {{ m.segment }}
      </td>

      {# Gloss #}
      <td class="px-3 py-2 align-top">
        {{ m.gloss or 'â€”' }}
      </td>

      {# Category #}
      <td class="px-3 py-2 align-top">
        {{ m.category }}
      </td>

      {# Used In -> link to morpheme_report with example count #}
      <td class="px-3 py-2 align-top">
        <a class="text-indigo-700 hover:underline"
           href="{{ url_for('morpheme_report', segment=m.segment) }}">
          {{ m.used_in_count }} {{ 'example' if (m.used_in_count|int) == 1 else 'examples' }}
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="mt-6">
  <a href="{{ url_for('home') }}" class="text-indigo-700 hover:underline">Home</a>
</div>

{% endblock %}